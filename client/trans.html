<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="trans.css">
    <title>East Europe Translater</title>
    <script src="func.js" type="text/javascript"></script>
    <script>
        window.onload = function(){
            //글자수 제한
            limitChar();
            //번역할 내용 보내는 코드
            const KRcontentForm = document.getElementById('KRcontent');
            KRcontentForm.addEventListener('submit', function (event) {
                //submit 버튼 클릭 시 나올 내용
                event.preventDefault();

                const body = JSON.stringify(
                    Object.fromEntries(new FormData(event.target))
                )

                get_1ndTranslation(event.target).then(function(EngButton){
                    //when eng button click
                    [].forEach.call(EngButton,function(btn){ 
                            btn.addEventListener("click",function(e){
                                event.preventDefault();

                                //find selected languege
                                const langueges = document.getElementsByName('lang');
                                const SelectedLang = FindLanguege(langueges);

                                //make object for request
                                const body = JSON.stringify(
                                    {
                                        "text": this.innerText
                                    }
                                );

                                get_2ndTranslation(body, SelectedLang);

                            });
                        });
                    });

            });
        };
    </script>
</head>
<body>
    <div class="container">
        <h1>East Europe Translater</h1>
        <!--'action' 속성에는 입력된 로그인 데이터를 보낼 서버 페이지의 주소-->
        <form id="KRcontent" name="KRcontent" action="http://localhost:3000/v1/translate/ko-en" method="post">
            <div class="Wrap1 clear">
                <textarea id="text" name="text" placeholder="3000자 이하 입력"></textarea>
                <div id="text_cnt">(0 / 3000)</div>
                <input type="submit" value="전송" class="submit">
            </div>
        </form>
        <div class="Wrap2">
           <div class="lang">
                <input type="radio" name="lang" value="Ukraine">
                <label for="lang">Україна</label>
                <input type="radio" name="lang" value="romania">
                <label for="lang">România</label>
            </div>
            <div class="eng">
                <div class="help">1차 번역(영어)이 완료되면 최종 번역하실 언어와 마음에 드는 1차 번역을 눌러주세요.</div>
            </div>
        </div>
        <div class="Wrap3">
        
        <div class="result">
            <div class="help">최종 번역 결과</div>
        </div>
        </div>
    </div>
    <footer>
       <p>github: @blarbalr</p>
        <small>email: blarblar@blar.com</small>
    </footer>
</body>
</html>